<% content_for :head do %>
  <title>Wallpapers House - Panel Admin</title>
<% end %>

<% content_for :content do %>
  <article class="col-12 admin_tables">
    <section class="destacados">
      <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col" class="fixed">Título</th>
          <th scope="col" class="fixed">Etiquetas</th>
          <th scope="col" class="fixed">Categoría</th>
          <th scope="col" class="fixed">Autor</th>
          <th scope="col" colspan="2" class="fixed">Acciones</th>
        </tr>
      </thead>
      <% @backgrounds.each do | background |%>
      <tr>
        <td class="fixed"> <%= background.title%> </td>
        <td class="fixed"> <%= background.tags%> </td>
        <% if background.categories.first == nil %>
          <td class="fixed"> Sin categoria </td>
        <% else %>
          <td class="fixed">
        <ul>
          <% background.categories.each do | category |%>
            <li> <%= category.name %> </li>
          <% end %>
        </ul>
        </td>
        <% end %>
        <% if background.author == nil %>
        <td class="fixed"> Sin autor </td>
        <% else %>
        <td class="fixed"> <%= background.author.nickname%> </td>
        <% end %>
        <td class="fixed">
          <%= link_to "Ver", background_path(background.id), method: :get, class: "btn btn-info"%>
          <%= link_to "Editar", edit_background_path(background.id), method: :get, class: "btn btn-primary"%>
        </td>
        <td class="fixed">
          <%= button_to "Borrar", background_path(background.id), method: :delete, class: "btn btn-danger"%>
        </td>
      </tr>
      <% end %>
      </table>
    </section>
    <section class="destacados">
      <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col" class="fixed">Nombre</th>
          <th scope="col" class="fixed">Acciones</th>
        </tr>
      </thead>
      <% @categories.each do | category |%>
      <tr>
        <td class="fixed"> <%= category.name%> </td>
        <td class="fixed"><a href="<%=category_path(category.id)%>" class="text-primary"><i class="fa fa-fw fa-show"></i>Ver</a>
        <%= button_to "Edit", edit_category_path(category.id), method: :get %>
        <%= button_to "Delete", category_path(category.id), method: :delete, data: { confirm: 'Are you certain you want to delete this?' }%>
      </tr>
      <% end %>
      </table>
    </section>
    <section class="destacados">
      <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Nombre</th>
          <th scope="col">Correo</th>
          <th scope="col">Tipo</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <% @users.each do | user |%>
      <tr>
        <td> <%= user.nickname%> </td>
        <td> <%= user.email%> </td>
        <% if user.type == 1 %>
                  <td> Administrador </td>
                <% elsif user.type == 2 %>
                  <td> Moderador </td>
                <% else %>
                  <td> Usuario registrado </td>
                <% end %>
        <td><a href="<%=user_path(user.id)%>" class="text-primary"><i class="fa fa-fw fa-show"></i>Ver</a>
        <%= button_to "Edit", edit_user_path(user.id), method: :get %>
        <%= button_to "Delete", user_path(user.id), method: :delete, data: { confirm: 'Are you certain you want to delete this?' }%>
      </tr>
      <% end %>
      </table>
    </section>
  </article>

<% end %>

<% content_for :pageScripts do %>
<% end %>